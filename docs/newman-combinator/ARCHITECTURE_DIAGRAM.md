# Newman Combinator - Architecture Diagram

## System Flow Visualization

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          NEWMAN COMBINATOR FRAMEWORK                       â”‚
â”‚                         Multi-Combination API Testing                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              INPUT LAYER                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                            â”‚
â”‚  ğŸ“ config/data-sets.json              ğŸ“ config/test-scenarios.json       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ naughtyStrings: [          â”‚        â”‚ name: "llm-with-naughty"    â”‚     â”‚
â”‚  â”‚   { str: "", cat: "Null" } â”‚        â”‚ dimensions: [               â”‚     â”‚
â”‚  â”‚   { str: "null", ... }     â”‚        â”‚   "naughtyStrings"          â”‚     â”‚
â”‚  â”‚   { str: "<script>", ... } â”‚        â”‚ ]                           â”‚     â”‚
â”‚  â”‚   ... (51 total)           â”‚        â”‚ endpointTemplate:           â”‚     â”‚
â”‚  â”‚ ]                          â”‚        â”‚   "/api/v1/Books/{{str}}"   â”‚     â”‚
â”‚  â”‚                            â”‚        â”‚ method: "POST"              â”‚     â”‚
â”‚  â”‚ validBookIds: [            â”‚        â”‚ expectedResults: {          â”‚     â”‚
â”‚  â”‚   { id: "123", ... }       â”‚        â”‚   statusCode: [400,404,405] â”‚     â”‚
â”‚  â”‚ ]                          â”‚        â”‚ }                           â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                                       â”‚ Load Configs
                                       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          COMBINATION ENGINE                                  â”‚
â”‚                      (src/combination-engine.js)                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  1. Load Data Sets                                                          â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”                                     â”‚
â”‚     â”‚ Naughtyâ”‚  â”‚  ISBN  â”‚  â”‚ Error  â”‚  ... data dimensions                â”‚
â”‚     â”‚Strings â”‚  â”‚Formats â”‚  â”‚ Codes  â”‚                                     â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                     â”‚
â”‚                                                                              â”‚
â”‚  2. Generate Cartesian Product                                              â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚     â”‚  cartesianProduct([dim1, dim2, ...])                  â”‚              â”‚
â”‚     â”‚                                                        â”‚              â”‚
â”‚     â”‚  Example: ["A","B"] Ã— ["1","2"] = [                  â”‚              â”‚
â”‚     â”‚    ["A","1"],                                        â”‚              â”‚
â”‚     â”‚    ["A","2"],                                        â”‚              â”‚
â”‚     â”‚    ["B","1"],                                        â”‚              â”‚
â”‚     â”‚    ["B","2"]                                         â”‚              â”‚
â”‚     â”‚  ]                                                    â”‚              â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                                              â”‚
â”‚  3. Apply Template Replacement                                              â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚     â”‚  Template: "/api/v1/Books/{{naughtyString}}"          â”‚              â”‚
â”‚     â”‚  Data: { naughtyString: "null" }                      â”‚              â”‚
â”‚     â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚              â”‚
â”‚     â”‚  Result: "/api/v1/Books/null"                         â”‚              â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                                              â”‚
â”‚  4. Assign Test IDs                                                         â”‚
â”‚     llm-with-naughty-book-ids-0001                                          â”‚
â”‚     llm-with-naughty-book-ids-0002                                          â”‚
â”‚     ... (51 total)                                                          â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                                       â”‚ Combinations Ready
                                       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            TEST RUNNER                                       â”‚
â”‚                        (src/test-runner.js)                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  For each combination:                                                      â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚  1. Create Iteration Data                                    â”‚           â”‚
â”‚  â”‚     {                                                        â”‚           â”‚
â”‚  â”‚       testId: "llm-with-naughty-book-ids-0002",             â”‚           â”‚
â”‚  â”‚       endpoint: "/api/v1/Books/null/generate-summary",      â”‚           â”‚
â”‚  â”‚       method: "POST",                                        â”‚           â”‚
â”‚  â”‚       expectedStatusCode: [400, 404, 405]                   â”‚           â”‚
â”‚  â”‚     }                                                        â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                          â”‚                                                   â”‚
â”‚                          â†“                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚  2. Execute via Newman                                       â”‚           â”‚
â”‚  â”‚     newman.run({                                             â”‚           â”‚
â”‚  â”‚       collection: "bookstore-combinator.json",              â”‚           â”‚
â”‚  â”‚       environment: envPath,                                  â”‚           â”‚
â”‚  â”‚       iterationData: [iteration]                             â”‚           â”‚
â”‚  â”‚     })                                                       â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                          â”‚                                                   â”‚
â”‚                          â†“                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚  3. Capture Response                                         â”‚           â”‚
â”‚  â”‚     statusCode: 500                                          â”‚           â”‚
â”‚  â”‚     responseTime: 45ms                                       â”‚           â”‚
â”‚  â”‚     responseBody: '{"message":"Internal server error"}'     â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                          â”‚                                                   â”‚
â”‚                          â†“                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚  4. Validate & Store                                         â”‚           â”‚
â”‚  â”‚     Expected: [400, 404, 405]                               â”‚           â”‚
â”‚  â”‚     Actual: 500                                              â”‚           â”‚
â”‚  â”‚     Result: âœ— FAIL - BUG FOUND!                             â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                                       â”‚ Results Collected
                                       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          OUTPUT LAYER                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  ğŸ“„ JSON Results                       ğŸ“Š Enhanced HTML Report              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ {                      â”‚            â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚
â”‚  â”‚   testId: "...-0002",  â”‚            â”‚ â”‚  Combination Analytics   â”‚ â”‚    â”‚
â”‚  â”‚   endpoint: "/Books/   â”‚            â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚    â”‚
â”‚  â”‚     null/...",         â”‚            â”‚ â”‚  â”‚ Total: 51 tests    â”‚  â”‚ â”‚    â”‚
â”‚  â”‚   statusCode: 500,     â”‚            â”‚ â”‚  â”‚ Passed: 49        â”‚  â”‚ â”‚    â”‚
â”‚  â”‚   responseTime: 45,    â”‚            â”‚ â”‚  â”‚ Failed: 2         â”‚  â”‚ â”‚    â”‚
â”‚  â”‚   responseBody: "{...}"â”‚            â”‚ â”‚  â”‚ Pass Rate: 96%    â”‚  â”‚ â”‚    â”‚
â”‚  â”‚ }                      â”‚            â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚
â”‚                                        â”‚                               â”‚    â”‚
â”‚                                        â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚
â”‚                                        â”‚ â”‚   Naughty Strings        â”‚ â”‚    â”‚
â”‚                                        â”‚ â”‚       Heatmap            â”‚ â”‚    â”‚
â”‚                                        â”‚ â”‚  â”Œâ”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”  â”‚ â”‚    â”‚
â”‚                                        â”‚ â”‚  â”‚âœ“â”‚âœ“â”‚âœ—â”‚âœ“â”‚âœ“â”‚âœ“â”‚âœ“â”‚âœ“â”‚âœ“â”‚âœ“â”‚  â”‚ â”‚    â”‚
â”‚                                        â”‚ â”‚  â””â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”´â”€â”˜  â”‚ â”‚    â”‚
â”‚                                        â”‚ â”‚  Empty XSS  SQL Unicode  â”‚ â”‚    â”‚
â”‚                                        â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚
â”‚                                        â”‚                               â”‚    â”‚
â”‚                                        â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚
â”‚                                        â”‚ â”‚   Test Results Table     â”‚ â”‚    â”‚
â”‚                                        â”‚ â”‚  â”Œâ”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â” â”‚ â”‚    â”‚
â”‚                                        â”‚ â”‚  â”‚IDâ”‚Codeâ”‚ Time â”‚[View]â”‚ â”‚ â”‚    â”‚
â”‚                                        â”‚ â”‚  â”œâ”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤ â”‚ â”‚    â”‚
â”‚                                        â”‚ â”‚  â”‚02â”‚500 â”‚ 45ms â”‚ [+] â”‚ â”‚ â”‚    â”‚
â”‚                                        â”‚ â”‚  â”‚  â”‚    â”‚      â”‚ â”‚   â”‚ â”‚ â”‚    â”‚
â”‚                                        â”‚ â”‚  â”‚  â”‚    â”‚      â”‚ â†“   â”‚ â”‚ â”‚    â”‚
â”‚                                        â”‚ â”‚  â”‚  â”‚    â”‚      â”‚{"m..â”‚ â”‚ â”‚    â”‚
â”‚                                        â”‚ â”‚  â””â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜ â”‚ â”‚    â”‚
â”‚                                        â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚
â”‚                                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          EXPORT TOOL (NEW)                                   â”‚
â”‚                    (src/export-combinations.js)                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  ğŸ” Preview Combinations BEFORE Running Tests                               â”‚
â”‚                                                                              â”‚
â”‚  $ node src/export-combinations.js --scenario llm-with-naughty-book-ids    â”‚
â”‚                                                                              â”‚
â”‚  Output:                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚ â–¶ Scenario: llm-with-naughty-book-ids                        â”‚           â”‚
â”‚  â”‚   Total Combinations: 51                                     â”‚           â”‚
â”‚  â”‚                                                              â”‚           â”‚
â”‚  â”‚   Sample Combinations:                                       â”‚           â”‚
â”‚  â”‚   1. /api/v1/Books//generate-summary (empty string)         â”‚           â”‚
â”‚  â”‚   2. /api/v1/Books/null/generate-summary                    â”‚           â”‚
â”‚  â”‚   3. /api/v1/Books/<script>.../generate-summary             â”‚           â”‚
â”‚  â”‚   ... (48 more)                                             â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                                              â”‚
â”‚  Formats:                                                                    â”‚
â”‚  â€¢ Console (default) - Pretty output                                        â”‚
â”‚  â€¢ JSON - Export to file for docs                                           â”‚
â”‚  â€¢ Markdown - Generate tables                                               â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Component Dependencies

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CombinationEngine â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚ uses
          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Test Runner     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚ uses
          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Newman       â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
          â”‚ executes           â”‚ uses
          â†“                    â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚ Postman Collectionâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚ generates
          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Test Results    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚ input to
          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Report Generator â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚ produces
          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    HTML Report    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Data Flow

```text
Configuration Files â†’ Combination Engine â†’ Test Combinations
                                                    â†“
                                          Test Runner (Newman)
                                                    â†“
                                            Execute Tests
                                                    â†“
                                          Capture Responses
                                                    â†“
                                          Store Results (JSON)
                                                    â†“
                                          Generate Reports (HTML)
```

## Key Algorithms

### 1. Cartesian Product (Lines 36-46 in combination-engine.js)

```javascript
cartesianProduct(arrays) {
  if (arrays.length === 0) return [[]];
  if (arrays.length === 1) return arrays[0].map(item => [item]);

  const [first, ...rest] = arrays;
  const restProduct = this.cartesianProduct(rest);

  return first.flatMap(firstItem =>
    restProduct.map(restItems => [firstItem, ...restItems])
  );
}

// Example:
// Input: [["A", "B"], ["1", "2"]]
// Output: [["A", "1"], ["A", "2"], ["B", "1"], ["B", "2"]]
```

### 2. Template Replacement (Lines 128-148 in combination-engine.js)

```javascript
applyTemplate(template, data) {
  let result = template;

  for (const [key, value] of Object.entries(data)) {
    if (typeof value === 'object' && value !== null) {
      // Handle nested objects
      for (const [nestedKey, nestedValue] of Object.entries(value)) {
        const placeholder = new RegExp(`\\{\\{${nestedKey}\\}\\}`, 'g');
        result = result.replace(placeholder, nestedValue);
      }
    } else {
      // Handle simple values
      const placeholder = new RegExp(`\\{\\{${key}\\}\\}`, 'g');
      result = result.replace(placeholder, value);
    }
  }

  return result;
}

// Example:
// template = "/api/v1/Books/{{bookId}}/summary"
// data = { validBookIds: { bookId: "123", description: "..." } }
// result = "/api/v1/Books/123/summary"
```

### 3. Response Capture (Lines 173-178 in test-runner.js)

```javascript
if (summary.run.executions.length > 0) {
  const execution = summary.run.executions[0];
  if (execution.response) {
    result.statusCode = execution.response.code;
    result.responseTime = execution.response.responseTime;
    result.responseBody = execution.response.stream?.toString(); // â† KEY LINE
  }
}
```

## File Relationships

```text
test-scenarios.json
        â†“ (defines)
    Scenario Config
        â†“ (references)
data-sets.json
        â†“ (provides)
    Test Data
        â†“ (combined by)
combination-engine.js
        â†“ (generates)
    Test Combinations
        â†“ (executed by)
test-runner.js
        â†“ (uses)
Postman Collection
        â†“ (produces)
    Results JSON
        â†“ (formatted by)
enhanced-report-generator.js
        â†“ (creates)
    HTML Report
```

## Execution Timeline

```text
T0: Load Configurations
    â”œâ”€â”€ data-sets.json
    â”œâ”€â”€ test-scenarios.json
    â””â”€â”€ environments.json

T1: Generate Combinations
    â”œâ”€â”€ Extract data dimensions
    â”œâ”€â”€ Create Cartesian product
    â””â”€â”€ Apply templates

T2: Execute Tests (for each combination)
    â”œâ”€â”€ Create iteration data
    â”œâ”€â”€ Run Newman
    â”œâ”€â”€ Capture response
    â””â”€â”€ Validate results

T3: Aggregate Results
    â”œâ”€â”€ Collect all test results
    â”œâ”€â”€ Calculate summary stats
    â””â”€â”€ Save to JSON

T4: Generate Report
    â”œâ”€â”€ Parse JSON results
    â”œâ”€â”€ Create analytics
    â”œâ”€â”€ Build HTML
    â””â”€â”€ Open in browser
```

## Response Body Flow

```text
API Response
    â†“ (captured by)
execution.response.stream
    â†“ (converted to string)
result.responseBody
    â†“ (stored in)
JSON Results File
    â†“ (read by)
Report Generator
    â†“ (formatted as)
HTML <pre> tag
    â†“ (displayed via)
"View" Button Toggle
```

## Critical Success Path

```text
1. âœ… Config Files Valid
   â””â”€â”€ data-sets.json has correct book IDs
   â””â”€â”€ test-scenarios.json has correct endpoints
   â””â”€â”€ environments.json has correct API URL

2. âœ… Combinations Generated
   â””â”€â”€ Export tool shows expected count
   â””â”€â”€ Templates replaced correctly
   â””â”€â”€ No missing placeholders

3. âœ… Tests Execute
   â””â”€â”€ Newman runs without errors
   â””â”€â”€ Responses captured
   â””â”€â”€ Status codes validated

4. âœ… Results Stored
   â””â”€â”€ JSON file created
   â””â”€â”€ Response bodies present
   â””â”€â”€ All combinations tracked

5. âœ… Report Generated
   â””â”€â”€ HTML displays correctly
   â””â”€â”€ "View" buttons work
   â””â”€â”€ Response bodies visible
```

## Error Handling Flow

```text
Invalid Config
    â†“
[Combination Engine]
    â†“ throws error
"Configuration not loaded"

Missing Data Dimension
    â†“
[Combination Engine]
    â†“ throws error
"Data set 'xxx' not found"

Template Mismatch
    â†“
[Combination Engine]
    â†“ returns
Endpoint with {{placeholder}} intact

Newman Failure
    â†“
[Test Runner]
    â†“ captures
execution.error
    â†“ stores
result.failures[]

Response Capture Failure
    â†“
[Test Runner]
    â†“ fallback
responseBody = "Unable to capture"
```

---

## Quick Reference: What Each File Does

| File                           | Purpose               | Key Function              |
| ------------------------------ | --------------------- | ------------------------- |
| `combination-engine.js`        | Generate combinations | `cartesianProduct()`      |
| `test-runner.js`               | Execute tests         | `runScenario()`           |
| `enhanced-report-generator.js` | Create HTML           | `buildEnhancedHTML()`     |
| `export-combinations.js`       | Preview combos        | `displayConsoleSummary()` |
| `data-sets.json`               | Test data             | 51 naughty strings        |
| `test-scenarios.json`          | Scenarios             | Endpoint templates        |
| `postman_collection.json`      | Test template         | Dynamic requests          |

---

**This diagram shows the complete architecture from config files to final HTML report.**
